<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Function Associations - Comparisonia</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Comparisonia theme */
    body {
      font-family: Arial, sans-serif;
      background-color: #0d1b2a;
      color: #ffffff;
      margin: 20px;
      line-height: 1.7;
      font-size: 17px;
    }
    h1, h2 {
      text-align: center;
      color: #ff7b00;
      margin-bottom: 10px;
    }
    p {
      text-align: center;
      color: #dbe9f3;
      font-size: 17px;
    }
    .table-container {
      display: flex;
      justify-content: center;
      margin-top: 18px;
      overflow-x: auto;
    }
    table {
      border-collapse: collapse;
      background-color: #1b263b;
      width: 95%;
      max-width: 1300px;
      table-layout: fixed;
      font-size: 16px;
      margin-bottom: 30px;
    }
    th, td {
      border: 1px solid #415a77;
      padding: 14px;
      text-align: left;
      vertical-align: top;
      word-wrap: break-word;
    }
    th {
      background-color: #ff7b00;
      color: #0d1b2a;
      text-align: center;
      font-weight: bold;
      font-size: 17px;
    }
    tr:nth-child(even) {
      background-color: #243447;
    }
    ul { padding-left: 18px; margin: 0; }
    li { margin: 6px 0; }
    section { margin-top: 36px; }
    .img-slot {
      width: 140px;
      height: 80px;
      margin: 10px auto 8px;
      border: 2px dashed #415a77;
      border-radius: 6px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#dbe9f3;
      background:#0f2333;
      font-size:13px;
    }
    .section-intro { max-width:1100px; margin:0 auto; color:#dbe9f3; font-size:15px; text-align:center; }
    .note { color:#bfcbd9; font-size:14px; margin-top:8px; }
    @media (max-width:860px){
      .img-slot { width:90%; height:110px; }
    }
			/* Centered section images */
	.section-img {
	  display: block;
	  margin: 14px auto;        /* Centers the image */
	  max-width: 95%;           /* Responsive, never overflows */
	  border-radius: 10px;      /* Comparisonia theme */
	  border: 2px solid #415a77;
	  background: #ffffff;
	}
  </style>
</head>
<body>

  <h1>Function Associations</h1>
  

  <!-- Introduction -->
	<section id="function-associations-intro">
	<h2>Introduction</h2>
	<img class="section-img" src="Function_association_intro.png" alt="section image">

	<div class="table-container">
		<table>
		<tr><th>Description</th></tr>

		<tr>
        <td>
          Function associations allow you to execute custom code to modify requests and responses as they pass through the CloudFront distribution.
        </td>
		</tr>

		<tr>
        <td>
          Enabling more personalized and dynamic content delivery.
        </td>
		</tr>

		<tr>
        <td>
          There are four main points in the CloudFront request/response lifecycle where you can associate functions:<br><br>
          1. Viewer Request<br>
          2. Origin Request<br>
          3. Origin Response<br>
          4. Viewer Response
        </td>
		</tr>

    </table>
  </div>
</section>


<!-- Function Association Points -->
<!-- Function Association Points -->
<section id="function-association-points">
  <h2>Function Association Points</h2>
  
  <!-- Viewer Request -->
  <section>
    <h3 style="text-align:center; color:#ff7b00; margin-bottom:10px;">Viewer Request</h3>

    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>When It Runs</td>
          <td>Executes when CloudFront receives a request from a viewer</td>
        </tr>

        <tr>
          <td>Use Cases</td>
          <td>
            <ol>
              <li>URL rewrites</li>
              <li>Redirects</li>
              <li>Request validation</li>
              <li>Adding custom headers</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Example</td>
          <td>
            You want to redirect users to different versions of your website based on their
            geographic location. For instance, users from Germany should be redirected to the
            German version, and users from India should be redirected to the Indian version.
          </td>
        </tr>

      </table>
    </div>
  </section>



  <!-- Origin Request -->
  <section>
    <h3 style="text-align:center; color:#ff7b00; margin-bottom:10px;">Origin Request</h3>

    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>When It Runs</td>
          <td>Executes only when CloudFront forwards a request to the origin</td>
        </tr>

        <tr>
          <td>Use Cases</td>
          <td>
            <ol>
              <li>Modifying headers before reaching the origin</li>
              <li>Adding authentication tokens</li>
              <li>Routing requests to different origins</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Example</td>
          <td>
            You have an origin server that requires an authentication token in the request
            header for security reasons. This token validates that the request is from
            CloudFront.
          </td>
        </tr>

      </table>
    </div>
  </section>



  <!-- Origin Response -->
  <section>
    <h3 style="text-align:center; color:#ff7b00; margin-bottom:10px;">Origin Response</h3>

    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>When It Runs</td>
          <td>
            Executes after CloudFront receives a response from the origin but before it caches
            or forwards it to the viewer.
          </td>
        </tr>

        <tr>
          <td>Use Cases</td>
          <td>
            <ol>
              <li>Modifying headers</li>
              <li>Altering response status codes</li>
              <li>Applying custom caching logic</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Example</td>
          <td>
            Control cache duration for specific content types.  
            Example: long cache for images, short cache for HTML.
          </td>
        </tr>

      </table>
    </div>
  </section>



  <!-- Viewer Response -->
  <section>
    <h3 style="text-align:center; color:#ff7b00; margin-bottom:10px;">Viewer Response</h3>

    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>When It Runs</td>
          <td>
            Executes after CloudFront retrieves the content (cache or origin) but before sending
            it to the viewer.
          </td>
        </tr>

        <tr>
          <td>Use Cases</td>
          <td>
            <ol>
              <li>Adding security headers</li>
              <li>Customizing error messages</li>
              <li>Modifying response headers</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Example</td>
          <td>
            Add CSP headers to enhance security and prevent injection attacks (XSS, clickjacking).
          </td>
        </tr>

      </table>
    </div>
  </section>

</section>
<!-- Types of Functions -->
<section id="types-of-functions">
  <h2>Types of Functions</h2>
  <div class="img-slot">PNG slot</div>


  <!-- CloudFront Functions -->
  <section>
    <h3 style="text-align:center; color:#ff7b00; margin-bottom:10px;">
      CloudFront Functions
    </h3>

    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>Designed For</td>
          <td>Lightweight, high-performance operations.</td>
        </tr>

        <tr>
          <td>Execution Time</td>
          <td>Millisecond-level latency.</td>
        </tr>

        <tr>
          <td>Cost</td>
          <td>Generally more cost-effective for simple operations.</td>
        </tr>

        <tr>
          <td>Languages Supported</td>
          <td>JavaScript (limited runtime)</td>
        </tr>

        <tr>
          <td>Common Use Cases</td>
          <td>
            <ol>
              <li>Header manipulations</li>
              <li>URL rewrites</li>
              <li>Redirects</li>
              <li>Request validation</li>
            </ol>
          </td>
        </tr>

      </table>
    </div>
  </section>



  <!-- Lambda@Edge -->
  <section>
    <h3 style="text-align:center; color:#ff7b00; margin-bottom:10px;">
      Lambda@Edge
    </h3>

    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>Designed For</td>
          <td>More complex and comprehensive operations.</td>
        </tr>

        <tr>
          <td>Execution Time</td>
          <td>Higher latency compared to CloudFront Functions.</td>
        </tr>

        <tr>
          <td>Cost</td>
          <td>More expensive; suitable for complex tasks.</td>
        </tr>

        <tr>
          <td>Languages Supported</td>
          <td>
            <ol>
              <li>Node.js</li>
              <li>Python</li>
              <li>Java</li>
              <li>C#</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Common Use Cases</td>
          <td>
            <ol>
              <li>Authentication and authorization</li>
              <li>Generating dynamic content</li>
              <li>Advanced decision-making</li>
              <li>Integration with other AWS services</li>
            </ol>
          </td>
        </tr>

      </table>
    </div>
  </section>

</section>



</body>
</html>
