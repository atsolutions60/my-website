<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CloudFront — Default Cache Behavior & Custom HTTPS - Comparisonia</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Comparisonia theme */
    body {
      font-family: Arial, sans-serif;
      background-color: #0d1b2a;
      color: #ffffff;
      margin: 20px;
      line-height: 1.7;
      font-size: 17px;
    }
    h1, h2 {
      text-align: center;
      color: #ff7b00;
      margin-bottom: 10px;
    }
    p {
      text-align: center;
      color: #dbe9f3;
      font-size: 17px;
    }
    .table-container {
      display: flex;
      justify-content: center;
      margin-top: 18px;
      overflow-x: auto;
    }
    table {
      border-collapse: collapse;
      background-color: #1b263b;
      width: 95%;
      max-width: 1300px;
      table-layout: fixed;
      font-size: 16px;
      margin-bottom: 30px;
    }
    th, td {
      border: 1px solid #415a77;
      padding: 14px;
      text-align: left;
      vertical-align: top;
      word-wrap: break-word;
    }
    th {
      background-color: #ff7b00;
      color: #0d1b2a;
      text-align: center;
      font-weight: bold;
      font-size: 17px;
    }
    tr:nth-child(even) {
      background-color: #243447;
    }
    ul { padding-left: 18px; margin: 0; }
    li { margin: 6px 0; }
    .highlight { color: #90ee90; font-weight: bold; }
    section { margin-top: 36px; }
    .img-slot {
      width: 140px;
      height: 80px;
      margin: 10px auto 8px;
      border: 2px dashed #415a77;
      border-radius: 6px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#dbe9f3;
      background:#0f2333;
      font-size:13px;
    }
    .section-intro { max-width:1100px; margin:0 auto; color:#dbe9f3; font-size:15px; text-align:center; }
    .note { color:#bfcbd9; font-size:14px; margin-top:8px; }
    .example { color:#dbe9f3; background:#0c2233; border-left:3px solid #90ee90; padding:8px 12px; border-radius:4px; margin-top:8px; font-size:15px; }
    @media (max-width:860px){
      .img-slot { width:90%; height:110px; }
    }
		/* Centered section images */
	.section-img {
	  display: block;
	  margin: 14px auto;        /* Centers the image */
	  max-width: 95%;           /* Responsive, never overflows */
	  border-radius: 10px;      /* Comparisonia theme */
	  border: 2px solid #415a77;
	  background: #ffffff;
	}
  </style>
</head>
<body>

  <h1>CloudFront — Default Cache Behavior &amp; Custom HTTPS</h1>
  

  <!-- Path Pattern -->
  <section id="path-pattern">
    <h2>Path Pattern</h2>
    <img class="section-img" src="Path Pattern.png" alt="section image">
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>
        <tr>
          <td>What it does</td>
          <td>Specifies which content to cache.</td>
        </tr>
        <tr>
          <td>Example</td>
          <td>
            <ol>
              <li><code>*</code> means all the content of your website.</li>
              <li><code>images/*</code> means cache the content from the images folder only.</li>
            </ol>
          </td>
        </tr>
      </table>
    </div>
  </section>

  <!-- Compress Objects Automatically -->
  <section id="compress-objects">
    <h2>Compress Objects Automatically</h2>
    
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>
        <tr>
          <td>What it does</td>
          <td>This option allows CloudFront to automatically compress files that are sent to users.</td>
        </tr>
        <tr>
          <td>Example</td>
          <td>If you have a CSS file that is 100 KB in size, enabling automatic compression might reduce it to 30 KB.</td>
        </tr>
      </table>
    </div>
  </section>

  <!-- Viewer Protocol Policy -->
  <section id="viewer-protocol">
    <h2>Viewer Protocol Policy</h2>
    <img class="section-img" src="Viewer Protocol Policy.png" alt="section image">
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>
        <tr>
          <td>What it does</td>
          <td>
            This setting determines how CloudFront handles HTTP and HTTPS requests from users (viewers). It controls whether users are allowed to access your content over HTTP, HTTPS, or both.
          </td>
        </tr>
        <tr>
          <td>Example</td>
          <td>
            <ol>
              <li><strong>HTTP and HTTPS</strong> — CloudFront will accept both HTTP and HTTPS requests.</li>
              <li><strong>Redirect HTTP to HTTPS</strong> — CloudFront will automatically redirect HTTP requests to HTTPS.</li>
              <li><strong>HTTPS Only</strong> — CloudFront will only accept HTTPS requests.</li>
            </ol>
          </td>
        </tr>
        <tr>
          <td>Important note</td>
          <td>
            <ol>
              <li>If you use the default CloudFront domain (example: <code>d123456.cloudfront.net</code>), HTTPS works without extra DNS setup.</li>
              <li>To use a custom domain, configure DNS (CNAME/Alias) and attach a certificate for HTTPS.</li>
            </ol>
          </td>
        </tr>
      </table>
    </div>
  </section>

  <!-- Allowed HTTP Methods -->
  <section id="allowed-http-methods">
    <h2>Allowed HTTP Methods</h2>
    
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>What it does</td>
          <td>Specify which HTTP methods CloudFront should accept from clients and forward to the origin server.</td>
        </tr>

        <tr>
          <td>GET, HEAD</td>
          <td>
            <strong>Purpose</strong><br>
            Retrieval methods only — typical for static content.<br>
            <strong>Use case</strong><br>
            Static websites or assets.
          </td>
        </tr>

        <tr>
          <td>GET, HEAD, OPTIONS</td>
          <td>
            <strong>Purpose</strong><br>
            Includes CORS preflight handling via OPTIONS.<br>
            <strong>Use case</strong><br>
            APIs and browsers performing CORS preflight.
          </td>
        </tr>

        <tr>
          <td>GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE</td>
          <td>
            <strong>Purpose</strong><br>
            Full CRUD support for dynamic applications.<br>
            <strong>Use case</strong><br>
            APIs and interactive applications needing write operations.
          </td>
        </tr>

        <tr>
          <td>Cache HTTP methods</td>
          <td>
            <ol>
              <li>By default, CloudFront caches responses to GET and HEAD requests.</li>
              <li>Caching OPTIONS can reduce origin load for frequent CORS preflights.</li>
              <li>Avoid caching state-changing methods (POST/PUT/DELETE) unless the origin is designed for it.</li>
            </ol>
          </td>
        </tr>

      </table>
    </div>
  </section>

  <!-- Restrict viewer access -->
  <section id="restrict-viewer-access">
    <h2>Restrict viewer access</h2>
    
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>Introduction</td>
          <td>Restrict viewer access to secure your content so only specific users can view it. Achieved via Signed URLs and Signed Cookies.</td>
        </tr>

        <tr>
          <td>Signed URLs</td>
          <td>A URL with a signature that grants temporary access to a single resource.</td>
        </tr>

        <tr>
          <td>Signed Cookies</td>
          <td>Cookies used to allow access to multiple resources during a session; requires cookie management on the client.</td>
        </tr>

        <tr>
          <td>Signed URLs — details</td>
          <td>
            <ol>
              <li>Single resource access</li>
              <li>Temporary, URL-based</li>
              <li>Useful for direct downloads to specific users</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Signed Cookies — details</td>
          <td>
            <ol>
              <li>Multiple resource access</li>
              <li>User sessions</li>
              <li>Seamless access across many files</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Trusted Key Groups</td>
          <td>Collections of public keys CloudFront uses to verify signed URLs/cookies; manage which keys can sign requests.</td>
        </tr>

        <tr>
          <td>Trusted Signers</td>
          <td>AWS accounts authorized to create signed URLs and signed cookies for a distribution.</td>
        </tr>

      </table>
    </div>
  </section>

  <!-- Cache key and origin requests -->
  <section id="cache-key-origin">
    <h2>Cache key and origin requests</h2>
    <div class="img-slot">PNG slot</div>
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>Scenario 1 — Cache Hit (user flow)</td>
          <td>
            A user requests a specific asset (e.g., Inception in Hindi 4K). DNS/latency-based routing sends the request to the nearest edge location. CloudFront checks cache (using cache key) and delivers the asset if present.
          </td>
        </tr>

        <tr>
          <td>Edge routing</td>
          <td>DNS and latency determine the nearest edge location (example: Edge Location-2).</td>
        </tr>

        <tr>
          <td>Cache check</td>
          <td>CloudFront uses the cache key (path, hostname, query strings, headers, cookies) to determine if the requested object exists in the edge cache.</td>
        </tr>

        <tr>
          <td>Scenario 2 — Cache Miss</td>
          <td>
            If the requested variant is not present, CloudFront forwards the request to the origin based on the origin request policy. The origin returns the content and CloudFront caches it at the edge for future requests.
          </td>
        </tr>

        <tr>
          <td>Origin Request Policy</td>
          <td>Defines which headers, cookies, and query strings are forwarded to the origin to retrieve the correct version.</td>
        </tr>

        <tr>
          <td>Caching at the edge</td>
          <td>After fetching from origin, CloudFront caches the object at the edge location for subsequent requests.</td>
        </tr>

        <tr>
          <td>Delivery</td>
          <td>Content is delivered to the user from the edge once cached or immediately after the origin response on a miss.</td>
        </tr>

      </table>
    </div>
  </section>

  <!-- Response headers policy -->
  <section id="response-headers-policy">
    <h2>Response headers policy</h2>
    <img class="section-img" src="Response headers policy.png" alt="section image">
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>Response header</td>
          <td>An HTTP response header sent from the server to the client; provides metadata about the response.</td>
        </tr>

        <tr>
          <td>Response Header Policy</td>
          <td>Allows adding, removing, or modifying HTTP response headers at the CloudFront edge without changing origin code.</td>
        </tr>

        <tr>
          <td>CORS</td>
          <td>Cross-Origin Resource Sharing settings to control access from other origins.</td>
        </tr>

        <tr>
          <td>Security headers</td>
          <td>Headers such as HSTS, X-Content-Type-Options, X-Frame-Options, X-XSS-Protection, Referrer-Policy, Content-Security-Policy to harden client behavior.</td>
        </tr>

        <tr>
          <td>Strict-Transport-Security</td>
          <td>Forces HTTPS usage: example <code>Strict-Transport-Security: max-age=31536000; includeSubDomains</code>.</td>
        </tr>

        <tr>
          <td>X-Content-Type-Options</td>
          <td>Prevents MIME-type sniffing: <code>nosniff</code>.</td>
        </tr>

        <tr>
          <td>X-Frame-Options</td>
          <td>Controls iframe embedding: <code>DENY</code> prevents embedding.</td>
        </tr>

        <tr>
          <td>X-XSS-Protection</td>
          <td>Enables browser XSS protection: <code>1; mode=block</code>.</td>
        </tr>

        <tr>
          <td>Referrer-Policy</td>
          <td>Controls referrer information (example: <code>no-referrer</code>).</td>
        </tr>

        <tr>
          <td>Content-Security-Policy</td>
          <td>Restricts allowable sources for scripts, styles, images, etc., e.g., <code>default-src 'self'</code>.</td>
        </tr>

        <tr>
          <td>Custom headers / Remove headers</td>
          <td>Include additional security or operational headers and remove headers that leak server internals.</td>
        </tr>

        <tr>
          <td>Server-Timing</td>
          <td>Expose performance metrics to clients for diagnostics.</td>
        </tr>

      </table>
    </div>
  </section>

  <!-- Custom HTTPS intro -->
  <section id="custom-https-intro">
    <h2>Custom HTTPS — Introduction</h2>
    <div class="img-slot">PNG slot</div>
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>
        <tr>
          <td>Objective</td>
          <td>Set up CloudFront to deliver an S3-hosted static website with a custom domain and HTTPS.</td>
        </tr>
      </table>
    </div>
  </section>

  <!-- Lab Implementation -->
  <section id="lab-implementation">
    <h2>Lab Implementation</h2>
    <div class="img-slot">PNG slot</div>
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>Step-1</td>
          <td>Static Website Hosted On S3 — We already have a website hosted on Amazon S3.</td>
        </tr>

        <tr>
          <td>Step-2: Custom Domain Name</td>
          <td>
            <ol>
              <li>Purchase a domain name.</li>
              <li>You can use AWS Route 53, GoDaddy, Namecheap, or any other registrar.</li>
              <li>For this lab, we are using Route 53.</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Step-3: SSL/TLS Certificate</td>
          <td>
            <ol>
              <li>Obtain an SSL/TLS certificate for your custom domain.</li>
              <li>You can use AWS Certificate Manager, Let's Encrypt, or another provider.</li>
              <li>For this lab, we are using AWS Certificate Manager.</li>
            </ol>
          </td>
        </tr>

        <tr>
          <td>Step-4: CloudFront Distribution</td>
          <td>Access AWS CloudFront to create and configure a distribution.</td>
        </tr>

      </table>
    </div>
  </section>

  <!-- Lab Testing -->
  <section id="lab-testing">
    <h2>Lab Testing</h2>
    <div class="img-slot">PNG slot</div>
    <div class="table-container">
      <table>
        <tr><th>Field</th><th>Description</th></tr>

        <tr>
          <td>Testing goal</td>
          <td>Ensure website is accessible via custom domain name.</td>
        </tr>

        <tr>
          <td>Observed issue</td>
          <td>The site can still be accessed using the S3 URL — to be addressed in next lab session.</td>
        </tr>

        <tr>
          <td>Next steps</td>
          <td>Address S3 direct access restriction in follow-up lab.</td>
        </tr>

      </table>
    </div>
  </section>

</body>
</html>
